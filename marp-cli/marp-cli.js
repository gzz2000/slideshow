"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("chalk")),o=e(require("yargs/yargs")),r=e(require("strip-ansi")),n=e(require("wrap-ansi")),i=require("yargs"),s=require("@marp-team/marp-core"),a=require("cosmiconfig"),p=e(require("path")),d=e(require("fs")),c=e(require("os-locale")),l=require("util"),b=require("url"),m=e(b),u={},h=require("child_process"),v=e(require("os")),k={},g=e(require("file-url")),f=e(require("get-stdin")),y=require("globby"),w=e(y),x=e(require("mkdirp")),I=require("tmp"),M=require("@marp-team/marpit"),N={},S=e(require("crypto")),j={},z={},P=e(require("pkg-up")),A=e(require("import-from")),D={},C=require("events"),T=e(require("express")),Z=e(require("querystring")),O={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function B(e,t,o,r){return new(o||(o=Promise))((function(n,i){function s(e){try{p(r.next(e))}catch(e){i(e)}}function a(e){try{p(r.throw(e))}catch(e){i(e)}}function p(e){e.done?n(e.value):new o((function(t){t(e.value)})).then(s,a)}p((r=r.apply(e,t||[])).next())}))}const L=i.terminalWidth()||80,H=(e,t,o)=>{const i=r(e).length+1;return`${e} ${(o.singleLine?t:n(t,L-i)).split("\n").join(`\n${" ".repeat(i)}`)}`};let W=!1;function F(e){W=e}function R(e,o={}){W||console.warn(H(t.bgCyan.black("[  INFO ]"),e,o))}function U(e,o={}){W||console.warn(H(t.bgYellow.black("[  WARN ]"),e,o))}function J(e,o={}){console.error(H(t.bgRed.white("[ ERROR ]"),e,o))}const q=l.promisify(h.exec);let E,X,Y=!1;function V(){return void 0===E&&(E=require("is-wsl")),E}const G=e=>B(void 0,void 0,void 0,(function*(){return(yield q(`wslpath -m ${e.replace(/\\/g,"\\\\")}`)).stdout.trim()})),$=e=>B(void 0,void 0,void 0,(function*(){if(V()){if(void 0===X){const e=(yield q("cmd.exe /c SET TMP")).stdout.trim();e.startsWith("TMP=")&&(X=e.slice(4))}if(void 0!==X)return p.win32.resolve(X,e)}return p.resolve(v.tmpdir(),e)}));function Q(){return B(this,void 0,void 0,(function*(){const e=new Set(["--disable-features=TranslateUI"]);if((process.env.IS_DOCKER||V())&&e.add("--no-sandbox"),(process.env.IS_DOCKER||process.env.CI)&&e.add("--disable-features=VizDisplayCompositor"),!1===Y){const e=process.env.IS_DOCKER?()=>["/usr/bin/chromium-browser"]:V()?k.wsl:k[process.platform];Y=e?e()[0]:void 0}return{executablePath:Y,ignoreDefaultArgs:["--disable-features=TranslateUI,BlinkGenPropertyTrees"],args:[...e]}}))}function _({marpit:e}){Object.assign(e.customDirectives.global,{description:e=>"string"==typeof e?{marpCLIDescription:e}:{},image:e=>"string"==typeof e?{marpCLIImage:e}:{},title:e=>"string"==typeof e?{marpCLITitle:e}:{},url:e=>{try{e&&new b.URL(e)}catch(t){return U(`Specified canonical URL is ignored since invalid URL: ${e}`),{}}return{marpCLIURL:e}}})}const K=Symbol();function ee(e){const{marpit:t}=e;e.core.ruler.push("marp_cli_info",e=>{var o;if(e.inlineMode)return;const{themeSet:r,lastGlobalDirectives:n}=t,i=n||{},s=i.theme||(r.default||{}).name,a={theme:s,description:i.marpCLIDescription,image:i.marpCLIImage,title:i.marpCLITitle,url:i.marpCLIURL,size:{height:r.getThemeProp(s,"heightPixel"),width:r.getThemeProp(s,"widthPixel")},length:0};for(const t of e.tokens)1===(null===(o=t.meta)||void 0===o?void 0:o.marpitSlideElement)&&(a.length+=1);t[K]=a})}class te{constructor(e,t=1){this.name="CLIError",this.message=e,this.errorCode=t}toString(){return this.message}}function oe(e,t=1){throw new te(e,t)}const re=l.promisify(d.stat),ne=l.promisify(x),ie=l.promisify(d.readFile),se=l.promisify(I.tmpName),ae=l.promisify(d.unlink),pe=l.promisify(d.writeFile),de=["md","mdown","markdown","markdn"];var ce;!function(e){e[e.File=0]="File",e[e.StandardIO=1]="StandardIO",e[e.Null=2]="Null"}(ce||(ce={}));class le{constructor(e){this.type=ce.File,this.path=e}get absolutePath(){return p.resolve(this.path)}get absoluteFileScheme(){return b.pathToFileURL?b.pathToFileURL(this.absolutePath).toString():g(this.absolutePath)}convert(e,t){switch(e){case void 0:return le.initialize(this.convertName(t),e=>e.type=this.type);case!1:return le.initialize(this.path,e=>e.type=ce.Null);case"-":return le.initialize("-",e=>e.type=ce.StandardIO)}return this.inputDir?le.initialize(this.convertName(Object.assign(Object.assign({},t),{basePath:p.join(e,this.relativePath(this.inputDir))}))):le.initialize(this.convertName(Object.assign(Object.assign({},t),{extension:void 0,basePath:e})))}load(){return B(this,void 0,void 0,(function*(){return this.buffer=this.buffer||(yield ie(this.path)),this.buffer}))}relativePath(e=process.cwd()){return p.relative(e,this.absolutePath)}save(){return B(this,void 0,void 0,(function*(){switch(this.type){case ce.File:yield this.saveToFile();break;case ce.StandardIO:process.stdout.write(this.buffer)}}))}saveTmpFile(e){return B(this,void 0,void 0,(function*(){const t=yield se({postfix:e});return yield this.saveToFile(t),{cleanup:()=>B(this,void 0,void 0,(function*(){try{yield this.cleanup(t)}catch(e){}})),path:t}}))}cleanup(e){return ae(e)}convertName(e={}){const{basePath:t,extension:o,page:r}=Object.assign({basePath:this.path},e);let n=t;if(void 0!==o&&(n=p.join(p.dirname(t),`${p.basename(t,p.extname(t))}.${o}`)),void 0!==r){const e=p.extname(n),t=r.toString().padStart(3,"0");n=p.join(p.dirname(n),`${p.basename(n,e)}.${t}${e}`)}return n}saveToFile(e=this.path){return B(this,void 0,void 0,(function*(){yield ne(p.dirname(p.resolve(e))),yield pe(e,this.buffer)}))}static findPath(e,...t){return B(this,void 0,void 0,(function*(){const o=new Set,r=[];for(const e of t){try{if((yield re(e)).isFile()){o.add(p.resolve(e));continue}}catch(e){}r.push(e.split(p.sep).join("/"))}return(yield w(r,Object.assign({absolute:!0,ignore:["**/node_modules"]},e))).forEach(e=>o.add(e)),[...o.values()].map(e=>p.normalize(e))}))}static find(...e){return B(this,void 0,void 0,(function*(){return(yield this.findPath({expandDirectories:{extensions:[],files:de.map(e=>`*.${e}`)}},...e)).map(e=>new le(e))}))}static findDir(e){return B(this,void 0,void 0,(function*(){const t=yield this.find(e);return t.forEach(t=>t.inputDir=p.resolve(e)),t}))}static stdin(){return B(this,void 0,void 0,(function*(){if(this.stdinBuffer=this.stdinBuffer||(yield f.buffer()),0!==this.stdinBuffer.length)return this.initialize("-",e=>{e.buffer=this.stdinBuffer,e.type=ce.StandardIO})}))}static initialize(e,t=(()=>{})){const o=new this(e);return t(o),o}}var be=Object.prototype.hasOwnProperty;function me(e,t){return Array.isArray(e)?function(e,t){for(var o,r="",n="",i=Array.isArray(t),s=0;s<e.length;s++)(o=me(e[s]))&&(i&&t[s]&&(o=ke(o)),r=r+n+o,n=" ");return r}(e,t):e&&"object"==typeof e?function(e){var t="",o="";for(var r in e)r&&e[r]&&be.call(e,r)&&(t=t+o+r,o=" ");return t}(e):e||""}function ue(e){if(!e)return"";if("object"==typeof e){var t="";for(var o in e)be.call(e,o)&&(t=t+o+":"+e[o]+";");return t}return e+""}function he(e,t,o,r){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(r?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),o||-1===t.indexOf('"'))?(o&&(t=ke(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}var ve=/["&<>]/;function ke(e){var t=""+e,o=ve.exec(t);if(!o)return e;var r,n,i,s="";for(r=o.index,n=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}n!==r&&(s+=t.substring(n,r)),n=r+1,s+=i}return n!==r?s+t.substring(n,r):s}var ge={merge:function e(t,o){if(1===arguments.length){for(var r=t[0],n=1;n<t.length;n++)r=e(r,t[n]);return r}for(var i in o)if("class"===i){var s=t[i]||[];t[i]=(Array.isArray(s)?s:[s]).concat(o[i]||[])}else if("style"===i){s=(s=ue(t[i]))&&";"!==s[s.length-1]?s+";":s;var a=ue(o[i]);a=a&&";"!==a[a.length-1]?a+";":a,t[i]=s+a}else t[i]=o[i];return t},classes:me,style:ue,attr:he,attrs:function(e,t){var o="";for(var r in e)if(be.call(e,r)){var n=e[r];if("class"===r){n=me(n),o=he(r,n,!1,t)+o;continue}"style"===r&&(n=ue(n)),o+=he(r,n,!1,t)}return o},escape:ke,rethrow:function e(t,o,r,n){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&o||n))throw t.message+=" on line "+r,t;try{n=n||d.readFileSync(o,"utf8")}catch(o){e(t,null,r)}var i=3,s=n.split("\n"),a=Math.max(r-i,0),p=Math.min(s.length,r+i);i=s.slice(a,p).map((function(e,t){var o=t+a+1;return(o==r?"  > ":"    ")+o+"| "+e})).join("\n");throw t.path=o,t.message=(o||"Pug")+":"+r+"\n"+i+"\n\n"+t.message,t}};function fe(e){var t,o="";try{var r={},n=e||{};(function(e,r,n,i,s,a,p,d,c,l){o=(o+="<!DOCTYPE html>")+"<html"+ge.attr("lang",p,!0,!0)+">",o+="<head>",r&&(o=o+"<base"+ge.attr("href",r,!0,!0)+">"),d&&(o=(o=(o+="<title>")+ge.escape(null==(t=d)?"":t)+"</title>")+'<meta property="og:title"'+ge.attr("content",d,!0,!0)+">",a&&(o=o+'<meta property="og:image:alt"'+ge.attr("content",d,!0,!0)+">")),i&&(o=(o=o+'<meta name="description"'+ge.attr("content",i,!0,!0)+">")+'<meta property="og:description"'+ge.attr("content",i,!0,!0)+">"),c&&(o=(o=o+'<link rel="canonical"'+ge.attr("href",c,!0,!0)+">")+'<meta property="og:url"'+ge.attr("content",c,!0,!0)+">"),a&&(o=o+'<meta property="og:image"'+ge.attr("content",a,!0,!0)+">"),o+='<meta charset="UTF-8">',o+='<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">',o+='<meta name="apple-mobile-web-app-capable" content="yes">',o+='<meta http-equiv="X-UA-Compatible" content="ie=edge">',o=(o+='<meta property="og:type" content="website">')+'<meta name="twitter:card"'+ge.attr("content",d&&a?"summary_large_image":"summary",!0,!0)+">",o=(o+='<style media="screen">')+(null==(t=e.css)?"":t)+"</style>",o=(o+="<style>")+(null==(t=n)?"":t)+"</style></head>",o+="<body>",o+=null==(t=s)?"":t,l&&(o=(o+="<script>")+(null==(t=l)?"":t)+"<\/script>"),o+="</body></html>"}).call(this,"bare"in n?n.bare:"undefined"!=typeof bare?bare:void 0,"base"in n?n.base:"undefined"!=typeof base?base:void 0,"css"in n?n.css:"undefined"!=typeof css?css:void 0,"description"in n?n.description:"undefined"!=typeof description?description:void 0,"html"in n?n.html:"undefined"!=typeof html?html:void 0,"image"in n?n.image:"undefined"!=typeof image?image:void 0,"lang"in n?n.lang:"undefined"!=typeof lang?lang:void 0,"title"in n?n.title:"undefined"!=typeof title?title:void 0,"url"in n?n.url:"undefined"!=typeof url?url:void 0,"watchJs"in n?n.watchJs:"undefined"!=typeof watchJs?watchJs:void 0)}catch(e){ge.rethrow(e,void 0,void 0,r[void 0])}return o}function ye(e){var t,o="";try{var r={},n=e||{};(function(e,r,n,i,s,a,p,d,c,l,b){o=(o+="<!DOCTYPE html>")+"<html"+ge.attr("lang",d,!0,!0)+">",o+="<head>",e&&(o=o+"<base"+ge.attr("href",e,!0,!0)+">"),c&&(o=(o=(o+="<title>")+ge.escape(null==(t=c)?"":t)+"</title>")+'<meta property="og:title"'+ge.attr("content",c,!0,!0)+">",p&&(o=o+'<meta property="og:image:alt"'+ge.attr("content",c,!0,!0)+">")),s&&(o=(o=o+'<meta name="description"'+ge.attr("content",s,!0,!0)+">")+'<meta property="og:description"'+ge.attr("content",s,!0,!0)+">"),l&&(o=(o=o+'<link rel="canonical"'+ge.attr("href",l,!0,!0)+">")+'<meta property="og:url"'+ge.attr("content",l,!0,!0)+">"),p&&(o=o+'<meta property="og:image"'+ge.attr("content",p,!0,!0)+">"),o+='<meta charset="UTF-8">',o+='<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">',o+='<meta name="apple-mobile-web-app-capable" content="yes">',o+='<meta http-equiv="X-UA-Compatible" content="ie=edge">',o=(o+='<meta property="og:type" content="website">')+'<meta name="twitter:card"'+ge.attr("content",c&&p?"summary_large_image":"summary",!0,!0)+">",o=(o+="<style>")+(null==(t=r.css)?"":t)+"</style>",o=(o+="<style>")+(null==(t=i)?"":t)+"</style></head>",o+="<body>",r.progress&&(o+='<div class="bespoke-progress-parent">',o+='<div class="bespoke-progress-bar"></div></div>'),r.osc&&(o+='<div class="bespoke-marp-osc">',o+='<button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">',o+="Previous slide</button>",o+='<span data-bespoke-marp-osc="page"></span>',o+='<button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">',o+="Next slide</button>",o+='<button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">',o+="Toggle fullscreen</button>",o+='<button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">',o+="Open presenter view</button></div>"),o+=null==(t=a)?"":t,n&&n.length>0&&function(){var e=n;if("number"==typeof e.length)for(var r=0,i=e.length;r<i;r++){(s=e[r])&&s.length>0&&(o=o+'<div class="bespoke-marp-note"'+ge.attr("data-index",r,!0,!0)+' tabindex="0">',function(){var e=s;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}else{n=0;for(var r in e){n++;i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}}}.call(this),o+="</div>")}else{i=0;for(var r in e){var s;i++,(s=e[r])&&s.length>0&&(o=o+'<div class="bespoke-marp-note"'+ge.attr("data-index",r,!0,!0)+' tabindex="0">',function(){var e=s;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}else{n=0;for(var r in e){n++;i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}}}.call(this),o+="</div>")}}}.call(this),o=(o+="<script>")+(null==(t=r.js)?"":t)+"<\/script>",b&&(o=(o+="<script>")+(null==(t=b)?"":t)+"<\/script>"),o+="</body></html>"}).call(this,"base"in n?n.base:"undefined"!=typeof base?base:void 0,"bespoke"in n?n.bespoke:"undefined"!=typeof bespoke?bespoke:void 0,"comments"in n?n.comments:"undefined"!=typeof comments?comments:void 0,"css"in n?n.css:"undefined"!=typeof css?css:void 0,"description"in n?n.description:"undefined"!=typeof description?description:void 0,"html"in n?n.html:"undefined"!=typeof html?html:void 0,"image"in n?n.image:"undefined"!=typeof image?image:void 0,"lang"in n?n.lang:"undefined"!=typeof lang?lang:void 0,"title"in n?n.title:"undefined"!=typeof title?title:void 0,"url"in n?n.url:"undefined"!=typeof url?url:void 0,"watchJs"in n?n.watchJs:"undefined"!=typeof watchJs?watchJs:void 0)}catch(e){ge.rethrow(e,void 0,void 0,r[void 0])}return o}function we(e){var t,o="";try{var r={},n=e||{};(function(e,r,n,i,s,a,p,d,c,l,b){o=(o+="<!DOCTYPE html>")+"<html"+ge.attr("lang",d,!0,!0)+">",o+="<head>",e&&(o=o+"<base"+ge.attr("href",e,!0,!0)+">"),c&&(o=(o=(o+="<title>")+ge.escape(null==(t=c)?"":t)+"</title>")+'<meta property="og:title"'+ge.attr("content",c,!0,!0)+">",p&&(o=o+'<meta property="og:image:alt"'+ge.attr("content",c,!0,!0)+">")),s&&(o=(o=o+'<meta name="description"'+ge.attr("content",s,!0,!0)+">")+'<meta property="og:description"'+ge.attr("content",s,!0,!0)+">"),l&&(o=(o=o+'<link rel="canonical"'+ge.attr("href",l,!0,!0)+">")+'<meta property="og:url"'+ge.attr("content",l,!0,!0)+">"),p&&(o=o+'<meta property="og:image"'+ge.attr("content",p,!0,!0)+">"),o+='<meta charset="UTF-8">',o+='<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">',o+='<meta name="apple-mobile-web-app-capable" content="yes">',o+='<meta http-equiv="X-UA-Compatible" content="ie=edge">',o=(o+='<meta property="og:type" content="website">')+'<meta name="twitter:card"'+ge.attr("content",c&&p?"summary_large_image":"summary",!0,!0)+">",o=(o+="<style>")+(null==(t=r.css)?"":t)+"</style>",o=(o+="<style>")+(null==(t=i)?"":t)+"</style></head>",o+="<body>",r.progress&&(o+='<div class="bespoke-progress-parent">',o+='<div class="bespoke-progress-bar"></div></div>'),r.osc&&(o+='<div class="bespoke-marp-osc">',o+='<button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">',o+="Previous slide</button>",o+='<span data-bespoke-marp-osc="page"></span>',o+='<button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">',o+="Next slide</button>",o+='<button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">',o+="Toggle fullscreen</button></div>"),o+=null==(t=a)?"":t,n&&n.length>0&&function(){var e=n;if("number"==typeof e.length)for(var r=0,i=e.length;r<i;r++){(s=e[r])&&s.length>0&&(o=o+'<div class="bespoke-marp-note"'+ge.attr("data-index",r,!0,!0)+' tabindex="0">',function(){var e=s;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}else{n=0;for(var r in e){n++;i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}}}.call(this),o+="</div>")}else{i=0;for(var r in e){var s;i++,(s=e[r])&&s.length>0&&(o=o+'<div class="bespoke-marp-note"'+ge.attr("data-index",r,!0,!0)+' tabindex="0">',function(){var e=s;if("number"==typeof e.length)for(var r=0,n=e.length;r<n;r++){var i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}else{n=0;for(var r in e){n++;i=e[r];o=(o+="<p>")+ge.escape(null==(t=i)?"":t)+"</p>"}}}.call(this),o+="</div>")}}}.call(this),o=(o+="<script>")+(null==(t=r.js)?"":t)+"<\/script>",b&&(o=(o+="<script>")+(null==(t=b)?"":t)+"<\/script>"),o+="</body></html>"}).call(this,"base"in n?n.base:"undefined"!=typeof base?base:void 0,"bespoke"in n?n.bespoke:"undefined"!=typeof bespoke?bespoke:void 0,"comments"in n?n.comments:"undefined"!=typeof comments?comments:void 0,"css"in n?n.css:"undefined"!=typeof css?css:void 0,"description"in n?n.description:"undefined"!=typeof description?description:void 0,"html"in n?n.html:"undefined"!=typeof html?html:void 0,"image"in n?n.image:"undefined"!=typeof image?image:void 0,"lang"in n?n.lang:"undefined"!=typeof lang?lang:void 0,"title"in n?n.title:"undefined"!=typeof title?title:void 0,"url"in n?n.url:"undefined"!=typeof url?url:void 0,"watchJs"in n?n.watchJs:"undefined"!=typeof watchJs?watchJs:void 0)}catch(e){ge.rethrow(e,void 0,void 0,r[void 0])}return o}const xe=l.promisify(d.readFile);function Ie(e){return B(this,void 0,void 0,(function*(){return(yield xe(p.resolve(__dirname,e))).toString()}))}function Me(e,t){return B(this,void 0,void 0,(function*(){return`window.__slideShow=${JSON.stringify({syncurl:t})};`+(yield xe(p.resolve(__dirname,e))).toString()}))}function Ne(e){return B(this,void 0,void 0,(function*(){if(void 0===e)return!1;const t=yield Ie("watch.js");return`window.__marpCliWatchWS=${JSON.stringify(e)};${t}`}))}var Se={bare:e=>B(void 0,void 0,void 0,(function*(){const t=e.renderer({container:[],inlineSVG:!0,slideContainer:[]});return{rendered:t,result:fe(Object.assign(Object.assign(Object.assign({},e),t),{bare:{css:"body,html{background:#000;height:100%;margin:0;overflow:auto;-ms-scroll-snap-type:y mandatory;scroll-snap-type:y mandatory;-ms-scroll-snap-type:mandatory;scroll-snap-type:mandatory;-ms-scroll-snap-points-y:repeat(100%);scroll-snap-points-y:repeat(100%)}body>svg{display:block;height:100%;scroll-snap-align:center center;width:100%}"},watchJs:yield Ne(e.notifyWS)}))}})),bespoke:e=>B(void 0,void 0,void 0,(function*(){var t;const o=e.renderer({container:new M.Element("div",{id:"p"}),inlineSVG:!0,slideContainer:[]});return{rendered:o,result:ye(Object.assign(Object.assign(Object.assign({},e),o),{bespoke:{css:'.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;-webkit-transition:none;transition:none}@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;-webkit-transition:opacity .2s linear;transition:opacity .2s linear;-webkit-tap-highlight-color:transparent}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled){-webkit-transition:none;transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTBMMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMzIgOTBsNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTQwIDcwSDIwVjUwbTIwIDBMMjAgNzBtNDAtNDBoMjB2MjBtLTIwIDBsMjAtMjAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTIwIDUwaDIwdjIwbS0yMCAwbDIwLTIwbTQwIDBINjBWMzBtMjAgMEw2MCA1MCIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS13aWR0aDo1cHh9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImEiIGQ9Ik0yMCA2MGgtNWE1IDUgMCAwMS01LTVWMjBhNSA1IDAgMDE1LTVoNjBhNSA1IDAgMDE1IDV2NU0zMCA4NWg2MCIvPjxyZWN0IHg9IjMwIiB5PSIzNSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQwIiByeD0iNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIi8+PHJlY3QgY2xhc3M9ImEiIHg9IjMwIiB5PSIzNSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQwIiByeD0iNSIvPjxwYXRoIGNsYXNzPSJhIiBkPSJNNDAgNTBoNDBNNDAgNjBoMzAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide.bespoke-marp-active{opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{bottom:0;left:0;position:absolute;right:0;top:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:rgba(0,0,0,.65);border-radius:7px;bottom:50px;color:#fff;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity .2s linear;transition:opacity .2s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;z-index:1;will-change:transform}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:-webkit-box;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{-webkit-box-flex:0;flex:0 0 0;background:#0288d1;-webkit-transition:-webkit-flex-basis .2s cubic-bezier(0,1,1,1);transition:-webkit-flex-basis .2s cubic-bezier(0,1,1,1);transition:flex-basis .2s cubic-bezier(0,1,1,1);transition:flex-basis .2s cubic-bezier(0,1,1,1),-webkit-flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:transparent}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{height:100%;left:0;position:absolute;top:0;width:100%;display:grid;grid-template-columns:2fr 1fr;grid-template-rows:minmax(140px,1fr) 2fr 3em;grid-template-areas:"current next" "current note" "info    note"}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;position:relative;overflow:hidden}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;position:absolute;pointer-events:none;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{-webkit-filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:transparent;border:0;display:block;-webkit-filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;position:absolute;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;top:20px;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#ddd;grid-area:note}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{margin:20px;width:calc(100% - 40px);height:calc(100% - 40px);box-sizing:border-box;overflow:auto;padding-right:3px;white-space:pre-wrap;word-wrap:break-word;scrollbar-width:thin;scrollbar-color:hsla(0,0%,86.7%,.5) transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:hsla(0,0%,86.7%,.5);border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{-webkit-box-align:center;align-items:center;box-sizing:border-box;color:#ddd;display:-webkit-box;display:flex;flex-wrap:nowrap;grid-area:info;-webkit-box-pack:center;justify-content:center;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{display:block;box-sizing:border-box;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{-webkit-box-ordinal-group:3;order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;-webkit-box-ordinal-group:2;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;-webkit-box-ordinal-group:4;order:3;text-align:right}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}',js:yield Ie("bespoke.js"),osc:(t=e.osc,null==t||t),progress:e.progress},watchJs:yield Ne(e.notifyWS)}))}})),bespokeSlideshow:e=>B(void 0,void 0,void 0,(function*(){var t;const o=e.renderer({container:new M.Element("div",{id:"p"}),inlineSVG:!0,slideContainer:[]});return{rendered:o,result:we(Object.assign(Object.assign(Object.assign({},e),o),{bespoke:{css:'.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;-webkit-transition:none;transition:none}@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;-webkit-transition:opacity .2s linear;transition:opacity .2s linear;-webkit-tap-highlight-color:transparent}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled),body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled){-webkit-transition:none;transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTBMMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMzIgOTBsNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTQwIDcwSDIwVjUwbTIwIDBMMjAgNzBtNDAtNDBoMjB2MjBtLTIwIDBsMjAtMjAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTIwIDUwaDIwdjIwbS0yMCAwbDIwLTIwbTQwIDBINjBWMzBtMjAgMEw2MCA1MCIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS13aWR0aDo1cHh9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImEiIGQ9Ik0yMCA2MGgtNWE1IDUgMCAwMS01LTVWMjBhNSA1IDAgMDE1LTVoNjBhNSA1IDAgMDE1IDV2NU0zMCA4NWg2MCIvPjxyZWN0IHg9IjMwIiB5PSIzNSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQwIiByeD0iNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIi8+PHJlY3QgY2xhc3M9ImEiIHg9IjMwIiB5PSIzNSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQwIiByeD0iNSIvPjxwYXRoIGNsYXNzPSJhIiBkPSJNNDAgNTBoNDBNNDAgNjBoMzAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide.bespoke-marp-active{opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent,body[data-bespoke-view=standalone] .bespoke-marp-parent{bottom:0;left:0;position:absolute;right:0;top:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc{background:rgba(0,0,0,.65);border-radius:7px;bottom:50px;color:#fff;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity .2s linear;transition:opacity .2s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;z-index:1;will-change:transform}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=standalone] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=standalone] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=standalone] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide,body[data-bespoke-view=standalone] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:-webkit-box;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{-webkit-box-flex:0;flex:0 0 0;background:#0288d1;-webkit-transition:-webkit-flex-basis .2s cubic-bezier(0,1,1,1);transition:-webkit-flex-basis .2s cubic-bezier(0,1,1,1);transition:flex-basis .2s cubic-bezier(0,1,1,1);transition:flex-basis .2s cubic-bezier(0,1,1,1),-webkit-flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:transparent}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{height:100%;left:0;position:absolute;top:0;width:100%;display:grid;grid-template-columns:2fr 1fr;grid-template-rows:minmax(140px,1fr) 2fr 3em;grid-template-areas:"current next" "current note" "info    note"}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;position:relative;overflow:hidden}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;position:absolute;pointer-events:none;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{-webkit-filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:transparent;border:0;display:block;-webkit-filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;position:absolute;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;top:20px;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#ddd;grid-area:note}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{margin:20px;width:calc(100% - 40px);height:calc(100% - 40px);box-sizing:border-box;overflow:auto;padding-right:3px;white-space:pre-wrap;word-wrap:break-word;scrollbar-width:thin;scrollbar-color:hsla(0,0%,86.7%,.5) transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:hsla(0,0%,86.7%,.5);border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{-webkit-box-align:center;align-items:center;box-sizing:border-box;color:#ddd;display:-webkit-box;display:flex;flex-wrap:nowrap;grid-area:info;-webkit-box-pack:center;justify-content:center;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{display:block;box-sizing:border-box;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{-webkit-box-ordinal-group:3;order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;-webkit-box-ordinal-group:2;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;-webkit-box-ordinal-group:4;order:3;text-align:right}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}',js:yield Me("bespokeSlideshow.js",e.syncurl),osc:(t=e.osc,null==t||t),progress:e.progress},watchJs:yield Ne(e.notifyWS)}))}}))};class je{constructor(e,t){this.converter=t.converter,this.events=t.events,this.finder=t.finder,this.mode=t.mode,this.chokidar=N.watch(e,{disableGlobbing:!0,ignoreInitial:!0}).on("change",e=>this.convert(e)).on("add",e=>this.convert(e)).on("unlink",e=>this.delete(e)),this.converter.options.themeSet.onThemeUpdated=e=>this.convert(e),Pe.start()}convert(e){return B(this,void 0,void 0,(function*(){const t=p.resolve(e),o=(yield this.finder()).filter(e=>p.resolve(e.path)===t),r=(yield this.converter.options.themeSet.findPath()).find(e=>p.resolve(e)===t),n=e=>{e.type===ce.File&&Pe.sendTo(e.absolutePath,"reload")};try{this.mode===je.WatchMode.Convert?yield this.converter.convertFiles(o,{onConverted:e=>{this.events.onConverted(e),n(e.file)}}):this.mode===je.WatchMode.Notify&&o.forEach(n)}catch(e){this.events.onError(e)}void 0!==r&&this.converter.options.themeSet.load(t)}))}delete(e){const t=p.resolve(e),{themeSet:o}=this.converter.options;o.unobserve(t),o.themes.delete(t)}static watch(e,t){return new je(e,t)}}class ze{constructor(){this.listeners=new Map}port(){return B(this,void 0,void 0,(function*(){return void 0===this.portNumber&&(this.portNumber=yield j.getPortPromise({port:37717})),this.portNumber}))}register(e){return B(this,void 0,void 0,(function*(){const t=ze.sha256(e);return this.listeners.has(t)||this.listeners.set(t,new Set),`ws://localhost:${yield this.port()}/${t}`}))}sendTo(e,t){if(!this.wss)return!1;const o=this.listeners.get(ze.sha256(e));return!!o&&(o.forEach(e=>e.send(t)),!0)}start(e={}){return B(this,void 0,void 0,(function*(){this.wss=new z.Server(Object.assign(Object.assign({},e),{port:yield this.port()})),this.wss.on("connection",(e,t)=>{if(t.url){const[,o]=t.url.split("/"),r=this.listeners.get(o);if(void 0!==r)return this.listeners.set(o,r.add(e)),e.on("close",()=>this.listeners.get(o).delete(e)),void e.send("ready")}e.close()})}))}stop(){void 0!==this.wss&&(this.wss.close(),this.wss=void 0)}static sha256(e){const t=S.createHash("sha256");return t.update(e),t.digest("hex").toString()}}const Pe=new ze;var Ae,De=je.watch;!function(e){let t;!function(e){e[e.Convert=0]="Convert",e[e.Notify=1]="Notify"}(t=e.WatchMode||(e.WatchMode={}))}(je||(je={})),function(e){e.html="html",e.pdf="pdf",e.png="png",e.pptx="pptx",e.jpeg="jpg"}(Ae||(Ae={}));const Ce={[Ae.html]:"text/html",[Ae.pdf]:"application/pdf",[Ae.png]:"image/png",[Ae.pptx]:"application/vnd.openxmlformats-officedocument.presentationml.presentation",[Ae.jpeg]:"image/jpeg"};class Te{constructor(e){this.options=e}get template(){const e=Se[this.options.template];return e||oe(`Template "${this.options.template}" is not found.`),e}convert(e,t){return B(this,void 0,void 0,(function*(){const{lang:o,globalDirectives:r,type:n}=this.options,i=e=>!!e&&e.type===ce.File;let s="";for(const e of Object.keys(r))void 0!==r[e]&&(s+=`\n\x3c!-- ${e}: ${JSON.stringify(r[e])} --\x3e`);return yield this.template(Object.assign(Object.assign({},this.options.templateOption||{}),{lang:o,base:i(t)&&n!==Ae.html?yield(e=>B(this,void 0,void 0,(function*(){return V()?`file:${yield G(e.absolutePath)}`:e.absoluteFileScheme})))(t):void 0,notifyWS:i(t)&&this.options.watch&&n===Ae.html?yield Pe.register(t.absolutePath):void 0,renderer:o=>{var r;const n=this.generateEngine(o),a=n.render(`${e}${s}`),p=n[K];return i(t)&&this.options.themeSet.observe(t.absolutePath,null===(r=p)||void 0===r?void 0:r.theme),Object.assign(Object.assign({},a),p)}}))}))}convertFile(e,t={}){return B(this,void 0,void 0,(function*(){const o=yield(()=>B(this,void 0,void 0,(function*(){try{return F(!!t.onlyScanning),yield this.convert((yield e.load()).toString(),e)}finally{F(!1)}})))();if(!t.onlyScanning){const r=[];switch(this.options.type){case Ae.pdf:r.push(yield this.convertFileToPDF(o,e));break;case Ae.png:case Ae.jpeg:r.push(...yield this.convertFileToImage(o,e,{pages:this.options.pages,quality:this.options.jpegQuality,type:this.options.type}));break;case Ae.pptx:r.push(yield this.convertFileToPPTX(o,e));break;default:r.push(this.convertFileToHTML(o,e))}for(const n of r)yield n.save(),t.onConverted&&t.onConverted({file:e,newFile:n,template:o});return{file:e,template:o,newFile:r[0]}}return{file:e,template:o}}))}convertFiles(e,t={}){return B(this,void 0,void 0,(function*(){const{inputDir:o,output:r}=this.options;!o&&r&&"-"!==r&&e.length>1&&oe("Output path cannot specify with processing multiple files.");for(const o of e)yield this.convertFile(o,t)}))}convertFileToHTML(e,t){const o=t.convert(this.options.output,{extension:"html"});return o.buffer=Buffer.from(e.result),o}convertFileToPDF(e,t){return B(this,void 0,void 0,(function*(){const o=new le(t.absolutePath);o.buffer=Buffer.from(e.result);const r=t.convert(this.options.output,{extension:"pdf"});return r.buffer=yield this.usePuppeteer(o,(e,t)=>B(this,void 0,void 0,(function*(){return yield e.goto(t,{waitUntil:["domcontentloaded","networkidle0"]}),yield e.pdf({printBackground:!0,preferCSSPageSize:!0})}))),r}))}convertFileToImage(e,t,o){return B(this,void 0,void 0,(function*(){const r=new le(t.absolutePath);r.buffer=Buffer.from(e.result);const n=[];return yield this.usePuppeteer(r,(r,i)=>B(this,void 0,void 0,(function*(){yield r.setViewport(e.rendered.size),yield r.goto(i,{waitUntil:["domcontentloaded","networkidle0"]}),yield r.emulateMediaType("print");const s=t=>B(this,void 0,void 0,(function*(){return yield r.evaluate(`window.scrollTo(0,${((t||1)-1)*e.rendered.size.height})`),o.type===Ae.jpeg?yield r.screenshot({quality:o.quality,type:"jpeg"}):yield r.screenshot({type:"png"})}));if(o.pages)for(let r=1;r<=e.rendered.length;r+=1){const e=t.convert(this.options.output,{page:r,extension:o.type});e.buffer=yield s(r),n.push(e)}else{const e=t.convert(this.options.output,{extension:o.type});e.buffer=yield s(),n.push(e)}}))),n}))}convertFileToPPTX(e,t){return B(this,void 0,void 0,(function*(){const o=yield this.convertFileToImage(e,t,{pages:!0,type:Ae.png}),r=new((yield new Promise((function(e){e(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach((function(o){var r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,r.get?r:{enumerable:!0,get:function(){return e[o]}})})),t.default=e,t}(require("@marp-team/pptx")))}))).default),n=`${e.rendered.size.width}x${e.rendered.size.height}`;r.setAuthor("Created by Marp"),r.setCompany("Created by Marp"),r.setLayout({name:n,width:e.rendered.size.width/96,height:e.rendered.size.height/96}),e.rendered.title&&r.setTitle(e.rendered.title),e.rendered.description&&r.setSubject(e.rendered.description);let i=0;for(const t of o){i+=1,r.defineSlideMaster({title:`Page ${i}`,bkgd:{data:`data:image/png;base64,${t.buffer.toString("base64")}`},margin:0});const o=r.addNewSlide(`Page ${i}`),n=e.rendered.comments[i-1].join("\n\n");n&&o.addNotes(n)}const s=t.convert(this.options.output,{extension:"pptx"});return s.buffer=yield new Promise(e=>r.save("jszip",e,"nodebuffer")),s}))}generateEngine(e){var t;const{html:o,options:r}=this.options,{prototype:n}=this.options.engine,i=Object.assign(Object.assign(Object.assign({},r),e),{html:o}),s=(null===(t=n)||void 0===t?void 0:t.hasOwnProperty("constructor"))?new this.options.engine(i):this.options.engine(i);return"function"!=typeof s.render&&oe("Specified engine has not implemented render() method."),void 0!==o&&s.markdown.set({html:o}),s.use(_).use(ee),this.options.themeSet.registerTo(s),s}usePuppeteer(e,o){return B(this,void 0,void 0,(function*(){const r=yield(()=>{if(this.options.allowLocalFiles)return U(`Insecure local file accessing is enabled for conversion from ${e.relativePath()}.`),e.saveTmpFile(".html")})(),n=yield(()=>B(this,void 0,void 0,(function*(){return r?V()?`file:${yield G(r.path)}`:`file://${r.path}`:`data:text/html;base64,${e.buffer.toString("base64")}`})))();try{const e=yield Te.runBrowser(),i=yield e.newPage(),{missingFileSet:s,failedFileSet:a}=this.trackFailedLocalFileAccess(i);try{return yield o(i,n)}finally{s.size>0&&U(`${s.size>1?"Some of t":"T"}he local file${s.size>1?"s are":" is"} missing and will be ignored. Make sure the file path${s.size>1?"s are":" is"} correct.`),a.size>0&&U(`Marp CLI has detected accessing to local file${a.size>1?"s":""}. ${a.size>1?"They are":"That is"} blocked by security reason. Instead we recommend using assets uploaded to online. (Or you can use ${t.yellow("--allow-local-files")} option if you are understood of security risk)`),yield i.close()}}finally{r&&(yield r.cleanup())}}))}trackFailedLocalFileAccess(e){const t=new Set,o=new Set;return e.on("requestfailed",e=>{var r;try{const n=new b.URL(e.url());"file:"===n.protocol&&("net::ERR_FILE_NOT_FOUND"===(null===(r=e.failure())||void 0===r?void 0:r.errorText)?t.add(n.href):o.add(n.href))}catch(e){}}),{missingFileSet:t,failedFileSet:o}}static closeBrowser(){return B(this,void 0,void 0,(function*(){Te.browser&&(yield Te.browser.close())}))}static runBrowser(){return B(this,void 0,void 0,(function*(){return Te.browser||(Te.browser=yield u.launch(Object.assign(Object.assign({},yield Q()),{userDataDir:yield $("marp-cli-conversion")})),Te.browser.once("disconnected",()=>{Te.browser=void 0})),Te.browser}))}}class Ze{constructor(e){this.klass=e}static resolve(e,t){return B(this,void 0,void 0,(function*(){const o=new Ze(Ze.resolveModule(e,t));return yield o.resolvePackage(),o}))}static resolveModule(e,t){let o;if((Array.isArray(e)?e:[e]).some(e=>{var r;return"string"==typeof e?(o=t&&A.silent(p.dirname(p.resolve(t)),e)||A.silent(process.cwd(),e),(null===(r=o)||void 0===r?void 0:r.__esModule)&&(o=o.default)):o=e,o}),!o)throw new te("The specified engine has not resolved.");return o}resolvePackage(){return B(this,void 0,void 0,(function*(){const e=this.findClassPath(this.klass);if(!e)return;const t=yield P({cwd:p.dirname(e)});t&&(this.package=require(t))}))}findClassPath(e){var t;for(const o in require.cache){const r=require.cache[o].exports;if(r===e||(null===(t=r)||void 0===t?void 0:t.__esModule)&&Object.values(r).includes(e))return o}}}var Oe=Ze.resolve;const Be=l.promisify(d.lstat),Le=l.promisify(d.readFile);class He{constructor(e,t){this.filename=e,this.overrideName=!0===t.overrideName?this.genUniqName():t.overrideName,this.name=this.overrideName}get buffer(){return this.readBuffer}get css(){const e=this.buffer.toString();return this.overrideName?`${e}\n/* @theme ${this.overrideName} */`:e}load(){return B(this,void 0,void 0,(function*(){this.readBuffer=yield Le(this.filename)}))}genUniqName(){const e=()=>Math.random().toString(36).slice(2);return`${e()}${e()}${e()}${e()}`}static initialize(e,t={}){return B(this,void 0,void 0,(function*(){const o=new He(e,t);return yield o.load(),o}))}}class We{constructor(e){this.themes=new Map,this.onThemeUpdated=()=>{},this.observedMarkdowns=new Map,this.fn=e.fn,this.fnForWatch=e.fnForWatch}findPath(){return B(this,void 0,void 0,(function*(){return yield We.findPath(this.fn)}))}load(e){return B(this,void 0,void 0,(function*(){const t=p.resolve(e);let o=this.themes.get(t);o?yield o.load():(o=yield He.initialize(t),this.add(o)),void 0!==o.name&&this.notify(o.name)}))}observe(e,t){this.observedMarkdowns.set(e,t)}registerTo(e){for(const t of this.themes.values())try{const o=e.themeSet.add(t.css);t.name=o.name}catch(e){U(`Cannot register theme CSS: ${p.relative(process.cwd(),t.filename)} (${e.message})`)}}unobserve(e){this.observedMarkdowns.delete(e)}add(e){this.themes.set(e.filename,e)}notify(e){this.observedMarkdowns.forEach((t,o)=>{t===e&&this.onThemeUpdated(o)})}static initialize(e,t=[]){return B(this,void 0,void 0,(function*(){const o=[...e,...t.map(e=>e.filename)],r=yield We.findPath(o),n=new Set(r.map(e=>p.resolve(e)));for(const e of o)if(!y.hasMagic(e.split(p.sep).join("/")))try{const t=yield Be(e);(t.isFile()||t.isDirectory()||t.isSymbolicLink())&&n.add(p.resolve(e))}catch(e){}const i=new We({fn:o,fnForWatch:[...n]});for(const e of r)yield i.load(e);return t.forEach(e=>i.add(e)),i}))}static findPath(e){return B(this,void 0,void 0,(function*(){return le.findPath({expandDirectories:{extensions:[],files:["*.css"]}},...e)}))}}const Fe=l.promisify(d.lstat);class Re{constructor(){this.args={},this.conf={}}static fromArguments(e){return B(this,void 0,void 0,(function*(){const t=new Re;return t.args=e,yield t.loadConf(e.configFile),t.engine=yield t.args.engine?Oe(t.args.engine):t.conf.engine?Oe(t.conf.engine,t.confPath):Oe(["@marp-team/marp-core",s.Marp]),t}))}converterOption(){var e,t,o,r,n,i,s,a,d,l,b,m;return B(this,void 0,void 0,(function*(){const u=yield this.inputDir(),h=(e=this.args.server,null!=(t=null!=e?e:this.conf.server)&&t),v=(()=>!h&&(void 0!==this.args.output?this.args.output:void 0!==this.conf.output?"-"===this.conf.output||!1===this.conf.output?this.conf.output:p.resolve(p.dirname(this.confPath),this.conf.output):void 0))(),k=this.args.template||this.conf.template||"bespoke",g=(()=>{var e,t,o,r,n,i;if("bespoke"===k||"bespokeSlideshow"==k){const s=this.conf.bespoke||{};return{osc:(t=null===(e=this.args.bespoke)||void 0===e?void 0:e.osc,null!=t?t:s.osc),progress:(r=null===(o=this.args.bespoke)||void 0===o?void 0:o.progress,null!=r?r:s.progress),syncurl:(i=null===(n=this.args.bespoke)||void 0===n?void 0:n.syncurl,null!=i?i:s.syncurl)}}return{}})(),f=yield this.loadTheme(),y=f instanceof He?[f]:[],w=this.args.themeSet||(this.conf.themeSet?(Array.isArray(this.conf.themeSet)?this.conf.themeSet:[this.conf.themeSet]).map(e=>p.resolve(p.dirname(this.confPath),e)):[]),x=yield We.initialize((u?[u]:[]).concat(w),y);x.themes.size<=y.length&&w.length>0&&U("Not found additional theme CSS files.");const I=(()=>{if(this.args.pdf||this.conf.pdf)return Ae.pdf;if(this.args.pptx||this.conf.pptx)return Ae.pptx;const e=this.args.images||this.conf.images||this.args.image||this.conf.image;if("png"===e)return Ae.png;if("jpeg"===e)return Ae.jpeg;const t=(v||"").toLowerCase();return t.endsWith(".pdf")?Ae.pdf:t.endsWith(".png")?Ae.png:t.endsWith(".pptx")?Ae.pptx:t.endsWith(".jpg")||t.endsWith(".jpeg")?Ae.jpeg:Ae.html})(),M=(()=>{var e,t;const o=null!=(t=null!=(e=this.args.preview)?e:this.conf.preview)&&t;return o&&process.env.IS_DOCKER?(U("Preview window cannot show in an official docker image. Preview option was ignored."),!1):o})();return{inputDir:u,output:v,preview:M,server:h,template:k,templateOption:g,themeSet:x,type:I,allowLocalFiles:(o=this.args.allowLocalFiles,r=null!=o?o:this.conf.allowLocalFiles,null!=r&&r),engine:this.engine.klass,globalDirectives:{description:(n=this.args.description,null!=n?n:this.conf.description),image:(i=this.args.ogImage,null!=i?i:this.conf.ogImage),theme:f instanceof He?f.name:f,title:(s=this.args.title,null!=s?s:this.conf.title),url:(a=this.args.url,null!=a?a:this.conf.url)},html:(d=this.args.html,null!=d?d:this.conf.html),jpegQuality:(l=this.args.jpegQuality,b=null!=l?l:this.conf.jpegQuality,null!=b?b:85),lang:this.conf.lang||(yield c()).replace(/@/g,"-"),options:this.conf.options||{},pages:!(!this.args.images&&!this.conf.images),watch:(m=this.args.watch,(null!=m?m:this.conf.watch)||M||h||!1)}}))}get files(){return this.args.server||this.conf.server?[]:this.args._||[]}inputDir(){return B(this,void 0,void 0,(function*(){const e=(()=>{if(this.args.inputDir)return p.resolve(this.args.inputDir);if(this.conf.inputDir)return p.resolve(p.dirname(this.confPath),this.conf.inputDir);if((this.args.server||this.conf.server)&&Array.isArray(this.args._)){if(this.args._.length>1)throw new te("Server mode have to specify just one directory.");if(1===this.args._.length)return p.resolve(this.args._[0])}})();if(void 0===e)return;let t;try{t=yield Fe(e)}catch(t){if("ENOENT"!==t.code)throw t;throw new te(`Input directory "${e}" is not found.`)}if(!t.isDirectory())throw new te(`"${e}" is not directory.`);return e}))}loadConf(e){return B(this,void 0,void 0,(function*(){const t=a.cosmiconfig(Re.moduleName);try{const o=yield void 0===e?t.search():t.load(e);o&&(this.confPath=o.filepath,this.conf=o.config)}catch(t){throw new te(["Could not find or parse configuration file.","Error"!==t.name&&`(${t.name})`,void 0!==e&&`[${e}]`].filter(e=>e).join(" "))}}))}loadTheme(){return B(this,void 0,void 0,(function*(){const e=(()=>this.args.theme?{advice:{use:"--theme-set",insteadOf:"--theme"},name:this.args.theme,path:p.resolve(this.args.theme)}:this.conf.theme?{advice:{use:"themeSet",insteadOf:"theme"},name:this.conf.theme,path:p.resolve(p.dirname(this.confPath),this.conf.theme)}:void 0)();if(e){try{return yield He.initialize(e.path,{overrideName:!0})}catch(o){if("EISDIR"===o.code)throw R(`Please use ${t.yellow(e.advice.use)} option instead of ${e.advice.insteadOf} to make theme CSS available from directory.`),new te(`Directory cannot pass to theme option. (${e.path})`);if("ENOENT"!==o.code)throw o}return e.name}}))}}Re.moduleName="marp";var Ue=Re.fromArguments;class Je extends C.EventEmitter{}var qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0AgMAAAC2uDcZAAAADFBMVEUAAAABiNJnueQBZp1z8GXRAAAAA3RSTlMA/f4BYYQ1AAAFJUlEQVR42u3cuXGeMQyEYZrjwKFLcCluQv24Hlfp4L++kySwCyDwbkzyHekZXYla0zRN0zRN0zRN0zRN0zRN0zRN0zRN0zRN0zRN0zRN0zRNw/fNcrh3cv275fAPdv2n5fAv9mf+y3L4b69kb72SnV03spPrvy2H/5DrRnZy3chOrlu/2nslO7duZefWrezcuvmbfK9kp9bN7NS6mZ1at/9s75XszLqdnVm3szPrjl/peiU7se5gJ9Yd7MS65zf5XsnOq3vYeXUPO6/u+gOuV7LT6i52Wt3FTqv7/m7vleysuo+dVfexs+o+dlbdx06qO9lJdSc7qe5kJ9Wd7Jy6l51T97Jz6l52Tt3LTqm72Sl1Nzul7man1N3sjLqfnVH3szPqfnZG3c9OqAPshDrATqgD7IQ6wI7XEXa8jrDjdYQdryPscB1ih+sQO1yH2OE6xI7WMXa0jrGjdYwdrWPsYB1kB+sgO1gH2cE6yI7VUXasjrJjdZQdq6PsUB1mh+owO1SH2aE6zI7UcXakjrMjdZwdqePsQJ3ADtQJ7ECdwA7UCez+OoPdX2ew++sMdn+dwe6uU9jddQq7u05hd9cp7N46h91b57B76xx2b53D7qyT2J11EruzTmJ31knsvjqL3VdnsfvqLHZfncXuqtPYXXUau6tOY3fVaeyeOo/dU+exe+o8dk+dx+6oE9kddSK7o05kd9SJ7PY6k91eZ7Lb60x2e53Jbq5T2c11Kru5TmU316ns1jqX3VrnslvrXHZrncturJPZjXUyu7FOZjfWyey2OpvdVmez2+psdludzW6q09lNdTq7qU5nN9Xp7JY6n91S57Nb6nx2S53PbqgHsBvqAeyGegC7oR7Avl6PYF+vR7Cv1yPY1+sR7Mv1EPblgyHsy/UQ9uV6CPtqPYZ99WQM+2o9hn21HsO+WA9iXzwaxL5YD2JfrAexr9Wj2NfORrGv1aPY1+pR7Ev1MPalw2HsS/Uw9qXPqul/zn6RP/Y49pXTcewr9Tj2lXrYV/tKPZB94Xgg+0I9kH2hHsg+r0eyz89Hss/rkezzeiT7tB7KPr0Qyj6th7JP66Hss3os++xGLPusHss+q8eyT+rB7JMrweyTejD7pB7MPq5Hs4/vRLOP69Hs43o0+7Aezj68FM4+rIezD+vh7KN6PPvoVjz7qB7PPqrHsw/qCeyDawnsg3oC+6CewH5fz2C/v5fBfl/PYL+vZ7Df1lPYby+msN/WU9hv6ynsd/Uc9rubOex39Rz2u3oO+009if3mahL7TT2J/aaexH5dz2K/vpvFfl3PYr+uZ7Ff1tPYLy+nsV/W09gv62nsV/U89qvbeexX9Tz2q3oe+0U9kf3ieiL7RT2R/aKeyH6uZ7Kf72eyn+uZ7Od6Jvupnsp+eiCV/VRPZT/VU9mP9Vz24wu57Md6Lvuxnst+qCezH55IZj/Uk9kP9WT2fT2bff9GNvu+ns2+r2ez7+rp7LtH0tl39XT2XT2dfVvPZ9++ks++reezb+v57Jt6AfvmmQL2Tb2AfVMvYP/UK9g/71Swf+oV7J96Bfu7XsL+fqiE/V0vYX/XS9hf9Rr210s17K96DfurXsP+rBexP58qYn/Wi9if9SL2R72K/fFWFfujXsX+qFext17J3nole+uV7K1Xsrdeyd56JXvrleytV7K3XsneeiV765XsrVeyt17J3nole+uV7K1Xsmuapmmapmmapmmapmmapmmapmmapmmapmmapmmapmma9p/uH/kiUlWp8dyDAAAAAElFTkSuQmCC";class Ee extends Je{constructor(e={}){super(),this.options={height:e.height||360,width:e.width||640}}get carlo(){return this.carloInternal}open(e){return B(this,void 0,void 0,(function*(){this.emit("opening",e);const t=(yield this.createWindow())||(yield this.launch());t.on("close",()=>this.emit("close",t)),yield t.load(e),this.emit("open",t,e);const{close:o}=t;return t.close=()=>B(this,void 0,void 0,(function*(){try{return yield o.call(t)}catch(e){if(!e.message.includes("Target closed."))throw e}})),t}))}createWindow(){return B(this,void 0,void 0,(function*(){return!!this.carlo&&(yield this.carlo.createWindow({height:this.options.height,width:this.options.width}))}))}launch(){return B(this,void 0,void 0,(function*(){const e=yield Q();return this.carloInternal=yield D.launch({localDataDir:yield $("marp-cli-carlo"),args:e.args,height:this.options.height,width:this.options.width,executablePath:e.executablePath,icon:Buffer.from(qe.slice(22),"base64"),title:"Marp CLI"}),this.carlo.once("exit",()=>{this.emit("exit"),this.carloInternal=void 0}),this.emit("launch"),yield this.carlo.mainWindow()}))}}function Xe(e,t){if(e.type===ce.File){const t=e.absolutePath.replace(/\\/g,"/");return encodeURI(`file://${t.startsWith("/")?"":"/"}${t}`)}if(e.buffer)return`data:${Ce[t]};base64,${e.buffer.toString("base64")}`;throw new te("Processing file is not convertible to URI for preview.")}function Ye(e){var t,o="";try{var r={},n=e||{};(function(e,r,n,i,s,a){o+="<!DOCTYPE html>",o+="<html>",o+="<head>",o+='<meta charset="UTF-8">',o+='<meta name="google" content="notranslate">',o+='<meta name="viewport" content="width=device-width initial-scale=1.0">',o=(o+='<meta http-equiv="X-UA-Compatible" content="ie=edge">')+'<link rel="icon" type="image/png"'+ge.attr("href",n,!0,!0)+">",o=(o+="<style>")+(null==(t=a)?"":t)+"</style></head>",o+="<body>",o=(o+="<h1>")+ge.escape(null==(t=e)?"":t)+"</h1>",o+='<label id="show-all-container">',o+='<input class="toggle" id="show-all" type="checkbox">',o+="",o+="\n",o+="Show all files and directories</label>",o+='<ul id="index">',function(){var e=i;if("number"==typeof e.length)for(var n=0,s=e.length;n<s;n++){var a=e[n];o=(o=(o=o+"<li"+ge.attr("class",ge.classes([{convertible:a.convertible,directory:a.directory,nodeModules:a.nodeModules}],[!0]),!1,!0)+">")+'<a class="link file"'+ge.attr("href",r(a.name),!0,!0)+">")+ge.escape(null==(t=a.name)?"":t)+"</a>",a.convertible&&(o=o+'<a class="link pdf"'+ge.attr("href",`${r(a.name)}?pdf`,!0,!0)+">",o=(o+="PDF</a>")+'<a class="link pptx"'+ge.attr("href",`${r(a.name)}?pptx`,!0,!0)+">",o+="PPTX</a>"),o+="</li>"}else{s=0;for(var n in e){s++;a=e[n];o=(o=(o=o+"<li"+ge.attr("class",ge.classes([{convertible:a.convertible,directory:a.directory,nodeModules:a.nodeModules}],[!0]),!1,!0)+">")+'<a class="link file"'+ge.attr("href",r(a.name),!0,!0)+">")+ge.escape(null==(t=a.name)?"":t)+"</a>",a.convertible&&(o=o+'<a class="link pdf"'+ge.attr("href",`${r(a.name)}?pdf`,!0,!0)+">",o=(o+="PDF</a>")+'<a class="link pptx"'+ge.attr("href",`${r(a.name)}?pptx`,!0,!0)+">",o+="PPTX</a>"),o+="</li>"}}}.call(this),o+="</ul>",o=(o+="<script>")+(null==(t=s)?"":t)+"<\/script></body></html>"}).call(this,"directory"in n?n.directory:"undefined"!=typeof directory?directory:void 0,"encodeURIComponent"in n?n.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"favicon"in n?n.favicon:"undefined"!=typeof favicon?favicon:void 0,"files"in n?n.files:"undefined"!=typeof files?files:void 0,"script"in n?n.script:"undefined"!=typeof script?script:void 0,"style"in n?n.style:"undefined"!=typeof style?style:void 0)}catch(e){ge.rethrow(e,void 0,void 0,r[void 0])}return o}const Ve=l.promisify(d.stat),Ge=l.promisify(d.readFile);class $e extends Je{constructor(e,t={}){super(),e.options.inputDir||oe("Converter have to specify an input directory."),this.converter=e,this.directoryIndex=t.directoryIndex||[],this.inputDir=e.options.inputDir,this.options=t,this.port=Number.parseInt(process.env.PORT,10)||8080}start(){return B(this,void 0,void 0,(function*(){return this.setup(),new Promise((e,t)=>{const o=this.server.listen(this.port);o.on("listening",()=>{e()}),o.on("error",e=>{o.close(),"EADDRINUSE"===e.code?t(new te(e.message)):t(e)})})}))}convertMarkdown(e,t={}){return B(this,void 0,void 0,(function*(){this.converter.options.output=!1,this.converter.options.pages=!1,this.converter.options.type=(()=>{const e=Object.keys(t);return e.includes("pdf")?Ae.pdf:e.includes("pptx")?Ae.pptx:e.includes("png")?Ae.png:e.includes("jpg")||e.includes("jpeg")?Ae.jpeg:Ae.html})();const o=yield this.converter.convertFile(new le(e));return this.emit("converted",o),o}))}loadScript(){return B(this,void 0,void 0,(function*(){return void 0===$e.script&&($e.script=(yield Ge(p.resolve(__dirname,"./server/server-index.js"))).toString()),$e.script}))}preprocess(e,t){var o;return B(this,void 0,void 0,(function*(){const{pathname:r,query:n}=m.parse(e.url);if(!r)return;const i=Z.parse(n||""),s=e=>B(this,void 0,void 0,(function*(){try{const o=yield this.convertMarkdown(e,i);if(!o.newFile)throw new Error("Converter must return a converted file to serve.");const{type:r}=this.converter.options;r===Ae.pptx&&t.attachment(`${p.basename(e,p.extname(e))}.pptx`),t.type(Ce[r]).end(o.newFile.buffer)}catch(e){this.emit("error",e),t.status(503).end(e.toString())}})),a=yield this.validateMarkdown(r);if(a.valid)yield s(a.path);else if(null===(o=a.stats)||void 0===o?void 0:o.isDirectory())for(const e of this.directoryIndex){const t=yield this.validateMarkdown(p.join(p.relative(this.inputDir,a.path),e));if(t.valid){yield s(t.path);break}}}))}setup(){this.server=T(),this.server.get("*",(e,t,o)=>this.preprocess(e,t).then(()=>{t.finished||o()})).use(T.static(this.inputDir)).use(O(this.inputDir,{template:this.template.bind(this)}))}template(e,t){const{directory:o,path:r,fileList:n}=e,i=[];(()=>{B(this,void 0,void 0,(function*(){var e;const s=yield this.loadScript();for(const t of n){const{name:o,stat:r}=t,n=null===(e=r)||void 0===e?void 0:e.isDirectory(),s=".."===o&&n,a="node_modules"===o&&n,p=!s&&(yield this.validateMarkdown(o,r)).valid;i.push({convertible:p,directory:n,name:o,nodeModules:a,parent:s,stat:r})}t(null,Ye({directory:o,favicon:qe,files:i,path:r,script:s,style:'body{background:#fff;color:#444;font-size:15px}h1{font-size:26px}ul#index{list-style:none;margin:1em 2em;max-width:720px;padding:0}ul#index li{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNNzAgMzBMNTMuNTQgMTMuNTRDNTEuNTkgMTEuNTkgNTAgMTIuMjUgNTAgMTV2MjBhNSA1IDAgMDA1IDVoMjBhNSA1IDAgMDE1IDV2NDBhNSA1IDAgMDEtNSA1SDI1YTUgNSAwIDAxLTUtNVYxNWE1IDUgMCAwMTUtNWgxNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjY2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iNSIvPjwvc3ZnPg==");background-size:24px 24px;background-repeat:no-repeat;background-position:0;display:-webkit-box;display:flex;height:30px;margin:5px 0 0;opacity:.5;padding:0 0 0 calc(24px + .5em)}ul#index li.convertible{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+Lmx7ZmlsbDpub25lO3N0cm9rZTojMDI4OGQxO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJsIiBkPSJNMzYuNzEgNzYuNzlsNTMuNTctNTMuNTh2NTMuNThIMzYuNzF6Ii8+PHBhdGggY2xhc3M9ImwiIGQ9Ik0xMCA3Ni43OWw1My41Ny01My41OHY1My41OEgxMHoiLz48L3N2Zz4=");opacity:1}ul#index li.directory{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNODIgMzBINTdhMTMuOTEgMTMuOTEgMCAwMS04LjU0LTMuNTRsLTIuOTItMi45MkExMy45MSAxMy45MSAwIDAwMzcgMjBIMTdhNSA1IDAgMDAtNSA1djUwYzAgMi43NS41NSAyLjgyIDEuMjEuMTVsNy41OC0zMC4zQTYuNzQgNi43NCAwIDAxMjcgNDBoNjBhMy43MyAzLjczIDAgMDEzLjc5IDQuODVsLTcuNTggMzAuM0E2Ljc0IDYuNzQgMCAwMTc3IDgwSDIyIiBmaWxsPSJub25lIiBzdHJva2U9IiM2NjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1Ii8+PC9zdmc+")}ul#index li.directory:not(.nodeModules){opacity:1}ul#index li a.link{border-radius:5px;box-sizing:border-box;color:#02669d;display:block;height:30px;line-height:20px;padding:5px 10px;text-decoration:none}ul#index li a.link:focus,ul#index li a.link:hover{background:#f8f8f8;text-decoration:underline}ul#index li a.link:hover:active{background:#f0f0f0}ul#index li a.link.file{-webkit-box-flex:1;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}ul#index li a.link.pdf,ul#index li a.link.pptx{-webkit-box-flex:0;flex:0 1 auto;font-size:14px;margin:0 0 0 .5em}ul#index li a.link.pdf{color:#ee1d1f}ul#index li a.link.pptx{color:#b7472a}ul#index:not(.show-all) li.nodeModules,ul#index:not(.show-all) li:not(.convertible):not(.directory){display:none}#show-all-container{cursor:pointer;display:block;font-size:.85em;margin:1em 2em;max-width:720px;text-align:right}input.toggle[type=checkbox]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#666;border-radius:16px;cursor:pointer;display:inline-block;height:16px;margin:0;outline:0;position:relative;-webkit-transition:background-color .2s ease-out;transition:background-color .2s ease-out;vertical-align:middle;width:32px}input.toggle[type=checkbox]:before{border-radius:20px;border:1px solid transparent;bottom:-2px;box-sizing:border-box;content:"";display:block;left:-2px;opacity:.75;position:absolute;right:-2px;top:-2px;-webkit-transition:border-color .2s ease-out;transition:border-color .2s ease-out}input.toggle[type=checkbox]:after{background:#fff;border-radius:12px;content:"";display:inline-block;height:12px;left:2px;margin:0 auto 0 0;position:absolute;top:2px;-webkit-transition:left .2s ease-out;transition:left .2s ease-out;width:12px}input.toggle[type=checkbox]:focus:before{border-color:#555}input.toggle[type=checkbox]:checked{background-color:#6c6}input.toggle[type=checkbox]:checked:focus:before{border-color:#6c6}input.toggle[type=checkbox]:checked:after{left:calc(100% - 14px)}input.toggle[type=checkbox]:hover:active{background-color:#555;-webkit-transition:none;transition:none}input.toggle[type=checkbox]:hover:active:checked{background-color:#5b5}'}))}))})()}validateMarkdown(e,t){var o;return B(this,void 0,void 0,(function*(){const r=p.extname(e).slice(1);let n=de.includes(r);const i=p.resolve(this.inputDir),s=p.join(i,decodeURIComponent(e));if(!s.startsWith(i))return{valid:!1,path:s};let a;try{a=t||(yield Ve(s)),n=n&&!!(null===(o=a)||void 0===o?void 0:o.isFile())}catch(e){n=!1}return{valid:n,stats:a,path:s}}))}}function Qe(e){return B(this,void 0,void 0,(function*(){let t="";const{engine:o}=e;return o.klass===s.Marp?(t="@marp-team/marp-core v1.0.1",o.package&&"1.0.1"!==o.package.version&&(t=`user-installed @marp-team/marp-core v${o.package.version}`)):t=o.package&&o.package.name&&o.package.version?`customized engine in ${o.package.name} v${o.package.version}`:"customized engine",console.log(`@marp-team/marp-cli v0.17.0${t?` (w/ ${t})`:""}`),0}))}var _e;!function(e){e.Basic="Basic Options:",e.Converter="Converter Options:",e.Template="Template Options:",e.Meta="Meta Options:",e.Marp="Marp / Marpit Options:"}(_e||(_e={}));const Ke="\nUsage:\n  marp [options] <files...>\n  marp [options] -I <dir>\n".trim();exports.default=function(e=[]){return B(this,void 0,void 0,(function*(){let r;try{const n=o(e).usage(Ke).help(!1).version(!1).options({version:{alias:"v",describe:"Show versions",group:_e.Basic,type:"boolean"},help:{alias:"h",describe:"Show help",group:_e.Basic,type:"boolean"},output:{alias:"o",describe:"Output file path (or directory when input-dir is passed)",group:_e.Basic,type:"string"},"input-dir":{alias:"I",describe:"The base directory to find markdown and theme CSS",group:_e.Basic,type:"string"},"config-file":{alias:"c",describe:"Specify path to configuration file",group:_e.Basic,type:"string"},watch:{alias:"w",describe:"Watch input markdowns for changes",group:_e.Basic,type:"boolean"},server:{alias:"s",describe:"Enable server mode",group:_e.Basic,type:"boolean"},preview:{alias:"p",describe:"Open preview window (EXPERIMENTAL)",hidden:!!process.env.IS_DOCKER,group:_e.Basic,type:"boolean"},stdin:{default:!0,describe:"Read Markdown from stdin",hidden:!0,group:_e.Basic,type:"boolean"},pdf:{conflicts:["image","images","pptx"],describe:"Convert slide deck into PDF",group:_e.Converter,type:"boolean"},pptx:{conflicts:["pdf","image","images"],describe:"Convert slide deck into PowerPoint document",group:_e.Converter,type:"boolean"},image:{conflicts:["pdf","images","pptx"],describe:"Convert the first slide page into an image file",group:_e.Converter,choices:["png","jpeg"],coerce:e=>"jpg"===e?"jpeg":e,type:"string"},images:{conflicts:["pdf","image","pptx"],describe:"Convert slide deck into multiple image files",group:_e.Converter,choices:["png","jpeg"],coerce:e=>"jpg"===e?"jpeg":e,type:"string"},"jpeg-quality":{defaultDescription:"85",describe:"Setting JPEG image quality",group:_e.Converter,type:"number"},"allow-local-files":{describe:"Allow to access local files from Markdown while converting PDF and image (NOT SECURE)",group:_e.Converter,type:"boolean"},template:{describe:"Choose template",defaultDescription:"bespoke",group:_e.Template,choices:Object.keys(Se),type:"string"},"bespoke.osc":{describe:"[Bespoke] Use on-screen controller",defaultDescription:"true",group:_e.Template,type:"boolean"},"bespoke.progress":{describe:"[Bespoke] Use progress bar",defaultDescription:"false",group:_e.Template,type:"boolean"},"bespoke.syncurl":{describe:"[BespokeSlideshow] Syncurl",defaultDescription:"https://slideshow.guozz.cn/sync/test",group:_e.Template,type:"string"},title:{describe:"Define title of the slide deck",group:_e.Meta,type:"string"},description:{describe:"Define description of the slide deck",group:_e.Meta,type:"string"},url:{describe:"Define canonical URL",group:_e.Meta,type:"string"},"og-image":{describe:"Define Open Graph image URL",group:_e.Meta,type:"string"},engine:{describe:"Select Marpit based engine by module name or path",group:_e.Marp,type:"string"},html:{describe:"Enable or disable HTML tag",group:_e.Marp,type:"boolean"},theme:{describe:"Override theme by name or CSS file",group:_e.Marp,type:"string"},"theme-set":{array:!0,describe:"Path to additional theme CSS files",group:_e.Marp,type:"string"}}),i=n.argv;if(i.help)return n.showHelp(),0;const s=yield Ue(i);if(i.version)return yield Qe(s);const a=new Te(yield s.converterOption()),p=a.options,d=()=>B(this,void 0,void 0,(function*(){if(p.inputDir)return s.files.length>0?(J("Cannot pass files together with input directory."),[]):le.findDir(p.inputDir);return[i.stdin?yield le.stdin():void 0,...yield le.find(...s.files)].filter(e=>e)})),c=yield d(),{length:l}=c;if(0===l)return s.files.length>0&&U("Not found processable Markdown file(s).\n"),n.showHelp(),s.files.length>0?1:0;const b=[],m=e=>{const{file:t,newFile:o}=e;if(!o)return;const r=(e,t)=>e.type===ce.StandardIO?t:e.relativePath();b.push(o),R(`${r(t,"<stdin>")} ${o.type===ce.Null?"processed.":`=> ${r(o,"<stdout>")}`}`,{singleLine:!0})};try{p.server?yield a.convertFiles(c,{onlyScanning:!0}):(R(`Converting ${l} markdown${l>1?"s":""}...`),yield a.convertFiles(c,{onConverted:m}))}catch(e){oe(`Failed converting Markdown. (${e.message})`,e.errorCode)}if(p.watch){r=De([...p.inputDir?[p.inputDir]:s.files,...p.themeSet.fnForWatch],{converter:a,finder:d,events:{onConverted:m,onError:e=>J(`Failed converting Markdown. (${e.message})`)},mode:p.server?je.WatchMode.Notify:je.WatchMode.Convert});const e=new Ee;if(e.on("exit",()=>process.exit()),e.on("opening",e=>{const o=`[Preview] (EXPERIMENTAL) Opening ${e.substr(0,50)}...`;R(t.cyan(o))}),p.server){const o=new $e(a,{directoryIndex:["index.md","PITCHME.md"]});o.on("converted",m),o.on("error",e=>J(e.toString())),yield o.start();const r=`http://localhost:${o.port}`,n=`[Server mode] Start server listened at ${r}/ ...`;R(t.green(n)),p.preview&&(yield e.open(r))}else if(R(t.green("[Watch mode] Start watching...")),p.preview)for(const t of b)p.type!==Ae.pptx&&(yield e.open(Xe(t,p.type)))}return 0}catch(e){if(!(e instanceof te))throw e;return J(e.message),Pe.stop(),r&&r.chokidar.close(),e.errorCode}finally{yield Te.closeBrowser()}}))};
